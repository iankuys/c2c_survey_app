{% extends '_base.html' %}
{% block content %}

<div class="container text-center">
    {% if error_message %}
    <div class="alert alert-warning d-flex justify-content-between">
        {{ error_message }}<a href="{{ url_for('main_blueprint.index') }}"
            style="text-decoration: none; color: #604f03;font-weight: bolder;">×</a>
    </div>{% endif %}
    {% if info_message %}<div class="alert alert-info d-flex justify-content-between">
        {{ info_message }}<a href="{{ url_for('main_blueprint.index') }}"
            style="text-decoration: none; color: #294f60;font-weight: bolder;">×</a>
    </div>{% endif %}

    {% if key and c2c_id %}<p class="pb-1">Your access key is: <b><code>{{ key }}</code></b></p>
    <p class="pb-1">[DEBUG] Your original C2C ID is: <b><code>{{ c2c_id }}</code></b></p>
    {% else %}<p class="pb-1">We couldn't automatically detect an access key.</p>
    <form action="{{ url_for('main_blueprint.check') }}" method="POST">
        <label for="key" class="pb-2">If you have your access key, please enter it here.<br />
            Alternatively, you may enter your email address that is currently active with the C2C
            Registry so we may send you an email containing your access key.</label><br />
        <div class="input-group input-group-lg">
            <input type="text" class="form-control" style="text-align: center;" id="key" name="key"
                placeholder="Your access key or C2C email address">
        </div>
        <div class="pt-4 d-grid gap-2 col-6 mx-auto">
            <button type="submit" class="btn btn-primary btn-lg" id="submit_button">Submit</button>
            <button hidden type="button" class="btn btn-primary btn-lg disabled" id="loading_button">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Loading....
            </button>
        </div>
    </form>{% endif %}
</div>

<script type="text/javascript">
    var submit_button = document.getElementById('submit_button');
    var loading_button = document.getElementById('loading_button');
    submit_button.onclick = function disable_submit() {
        submit_button.setAttribute('hidden', '');
        loading_button.removeAttribute('hidden', '');
    }
</script>
{% endblock %}